<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Solrrbox Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #38b6ff;
        --primary-dark: #0096e0;
        --primary-light: #74d0ff;
        --secondary: #f8f9fa;
        --accent: #ff7e30;
        --text-dark: #2d3748;
        --text-light: #718096;
        --gray-light: #e2e8f0;
        --white: #ffffff;
        --success: #48bb78;
        --error: #e53e3e;
        --warning: #ed8936;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
        --radius: 12px;
        --border-light: 1px solid var(--gray-light);
      }

      body {
        font-family: "Open Sans", sans-serif;
        color: var(--text-dark);
        line-height: 1.6;
        background-color: var(--secondary);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Montserrat", sans-serif;
        font-weight: 600;
        line-height: 1.3;
      }

      /* Header */
      .header {
        background-color: var(--white);
        box-shadow: var(--shadow);
        position: sticky;
        top: 0;
        z-index: 1000;
        padding: 15px 0;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .logo {
        display: flex;
        align-items: center;
      }

      .logo img {
        height: 40px;
        margin-right: 10px;
        border-radius: 8px;
      }

      .logo h1 {
        color: var(--primary);
        font-size: 24px;
        font-weight: 700;
      }

      .logo span {
        color: var(--text-dark);
        font-weight: 300;
      }

      .header-search {
        flex: 1;
        max-width: 500px;
        margin: 0 40px;
        position: relative;
      }

      .search-bar {
        width: 100%;
        padding: 12px 50px 12px 20px;
        border: 2px solid var(--gray-light);
        border-radius: 25px;
        font-size: 14px;
        transition: var(--transition);
      }

      .search-bar:focus {
        outline: none;
        border-color: var(--primary);
      }

      .search-btn {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-light);
        cursor: pointer;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .notification-btn {
        position: relative;
        background: none;
        border: none;
        font-size: 20px;
        color: var(--text-light);
        cursor: pointer;
        transition: var(--transition);
      }

      .notification-btn:hover {
        color: var(--primary);
      }

      .notification-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--error);
        color: white;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        font-size: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .profile-menu {
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        position: relative;
      }

      .profile-avatar {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        background: linear-gradient(
          45deg,
          var(--primary),
          var(--primary-light)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
      }

      .profile-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        background: var(--white);
        border-radius: var(--radius);
        box-shadow: var(--shadow-lg);
        padding: 10px 0;
        min-width: 150px;
        display: none;
      }

      .profile-dropdown.active {
        display: block;
      }

      .dropdown-item {
        padding: 10px 20px;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .dropdown-item:hover {
        background: var(--secondary);
      }

      /* Layout */
      .dashboard-container {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
      }

      /* Sidebar */
      .sidebar {
        width: 250px;
        background: var(--white);
        height: calc(100vh - 70px);
        position: sticky;
        top: 70px;
        padding: 30px 0;
        box-shadow: var(--shadow);
      }

      .sidebar-nav {
        list-style: none;
      }

      .nav-item {
        margin-bottom: 5px;
      }

      .nav-link {
        display: flex;
        align-items: center;
        padding: 15px 25px;
        color: var(--text-light);
        text-decoration: none;
        transition: var(--transition);
        border-right: 3px solid transparent;
      }

      .nav-link:hover,
      .nav-link.active {
        background: rgba(56, 182, 255, 0.1);
        color: var(--primary);
        border-right-color: var(--primary);
      }

      .nav-link i {
        margin-right: 12px;
        width: 20px;
        text-align: center;
      }

      /* Main Content */
      .main-content {
        flex: 1;
        padding: 30px;
        background: var(--secondary);
      }

      .page-header {
        margin-bottom: 30px;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }

      .page-title {
        font-size: 28px;
        color: var(--text-dark);
        margin-bottom: 10px;
      }

      .page-subtitle {
        color: var(--text-light);
        font-size: 16px;
      }

      /* Cards */
      .card {
        background: var(--white);
        border-radius: var(--radius);
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: var(--border-light);
      }

      .card-title {
        font-size: 18px;
        color: var(--text-dark);
        margin: 0;
      }

      .card-action {
        color: var(--primary);
        text-decoration: none;
        font-size: 14px;
        font-weight: 600;
      }

      /* Stats Cards */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        border-radius: var(--radius);
        padding: 25px;
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 100px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        transform: translate(30px, -30px);
      }

      .stat-card.success {
        background: linear-gradient(135deg, var(--success), #38a169);
      }

      .stat-card.warning {
        background: linear-gradient(135deg, var(--warning), #d69e2e);
      }

      .stat-card.accent {
        background: linear-gradient(135deg, var(--accent), #e07628);
      }

      .stat-icon {
        font-size: 32px;
        margin-bottom: 15px;
        opacity: 0.8;
      }

      .stat-value {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 14px;
        opacity: 0.9;
      }

      /* Tables */
      .table-container {
        overflow-x: auto;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
      }

      .data-table th,
      .data-table td {
        padding: 15px;
        text-align: left;
        border-bottom: var(--border-light);
      }

      .data-table th {
        background: var(--secondary);
        font-weight: 600;
        color: var(--text-dark);
      }

      .data-table tr:hover {
        background: rgba(56, 182, 255, 0.05);
      }

      .product-img {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        object-fit: cover;
      }

      .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
      }

      .status-live {
        background: rgba(72, 187, 120, 0.2);
        color: var(--success);
      }

      .status-draft {
        background: rgba(237, 137, 54, 0.2);
        color: var(--warning);
      }

      .status-out-of-stock {
        background: rgba(229, 62, 62, 0.2);
        color: var(--error);
      }

      .status-pending {
        background: rgba(237, 137, 54, 0.2);
        color: var(--warning);
      }

      .status-completed {
        background: rgba(72, 187, 120, 0.2);
        color: var(--success);
      }

      .status-accent {
        background: rgba(255, 126, 48, 0.2);
        color: var(--accent);
      }

      .status-warning {
        background: rgba(237, 137, 54, 0.2);
        color: var(--warning);
      }

      /* Buttons */
      .btn {
        display: inline-block;
        background: var(--primary);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        text-decoration: none;
        transition: var(--transition);
        font-size: 14px;
      }

      .btn:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: var(--text-light);
      }

      .btn-secondary:hover {
        background: var(--text-dark);
      }

      .btn-success {
        background: var(--success);
      }

      .btn-small {
        padding: 8px 16px;
        font-size: 12px;
      }

      /* Forms */
      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 25px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--text-dark);
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid var(--gray-light);
        border-radius: 8px;
        font-size: 14px;
        transition: var(--transition);
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--primary);
      }

      /* Charts */
      .chart-container {
        height: 300px;
        position: relative;
      }

      /* Calendar Heatmap */
      .heatmap-container {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 3px;
        margin-top: 20px;
      }

      .heatmap-day {
        width: 15px;
        height: 15px;
        border-radius: 3px;
        background: var(--gray-light);
        position: relative;
      }

      .heatmap-day.level-1 {
        background: rgba(56, 182, 255, 0.3);
      }

      .heatmap-day.level-2 {
        background: rgba(56, 182, 255, 0.6);
      }

      .heatmap-day.level-3 {
        background: rgba(56, 182, 255, 0.8);
      }

      .heatmap-day.level-4 {
        background: var(--primary);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
      }

      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background: var(--white);
        border-radius: var(--radius);
        padding: 30px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: var(--text-light);
      }

      /* File Upload */
      .file-upload {
        border: 2px dashed var(--gray-light);
        border-radius: var(--radius);
        padding: 30px;
        text-align: center;
        cursor: pointer;
        transition: var(--transition);
      }

      .file-upload:hover {
        border-color: var(--primary);
      }

      .file-upload-icon {
        font-size: 40px;
        color: var(--primary);
        margin-bottom: 15px;
      }

      /* Toggle Switch */
      .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 34px;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .slider {
        background-color: var(--primary);
      }

      input:checked + .slider:before {
        transform: translateX(26px);
      }

      /* Responsive */
      @media (max-width: 768px) {
        .dashboard-container {
          flex-direction: column;
        }

        .sidebar {
          width: 100%;
          height: auto;
          position: static;
        }

        .header-search {
          display: none;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .form-grid {
          grid-template-columns: 1fr;
        }

        .page-header {
          flex-direction: column;
          gap: 15px;
        }
      }

      .hidden {
        display: none !important;
      }

      /* Action Buttons */
      .action-btn {
        background: none;
        border: none;
        padding: 8px;
        border-radius: 6px;
        cursor: pointer;
        color: var(--text-light);
        transition: var(--transition);
      }

      .action-btn:hover {
        background: var(--secondary);
        color: var(--primary);
      }

      .image-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .gallery-item {
        position: relative;
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .gallery-item:hover {
        transform: scale(1.02);
      }

      .gallery-item img {
        width: 100%;
        height: 150px;
        object-fit: cover;
      }

      .gallery-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: var(--transition);
      }

      .gallery-item:hover .gallery-overlay {
        opacity: 1;
      }

      /* Order Detail View */
      .order-detail-card {
        background: var(--white);
        border-radius: var(--radius);
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: var(--shadow);
      }

      .order-detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: var(--border-light);
      }

      .order-status-select {
        padding: 8px 12px;
        border: 2px solid var(--gray-light);
        border-radius: 6px;
        font-size: 14px;
      }

      .order-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 25px;
      }

      .order-info-item {
        padding: 15px;
        background: var(--secondary);
        border-radius: var(--radius);
      }

      .order-info-label {
        font-size: 12px;
        color: var(--text-light);
        margin-bottom: 5px;
      }

      .order-info-value {
        font-size: 16px;
        font-weight: 600;
      }

      .back-button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 20px;
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        cursor: pointer;
      }

      .back-button:hover {
        color: var(--primary-dark);
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <img src="./images/Solrrbox.jpg" alt="Solrrbox Logo" />
          <h1>Solrr<span>box</span></h1>
        </div>

        <div class="header-search">
          <input
            type="text"
            class="search-bar"
            placeholder="Search products, orders, services..."
          />
          <button class="search-btn"><i class="fas fa-search"></i></button>
        </div>

        <div class="header-actions">
          <button class="notification-btn">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </button>

          <div class="profile-menu" onclick="toggleProfileDropdown()">
            <div class="profile-avatar">RK</div>
            <span>Rajesh Kumar</span>
            <i class="fas fa-chevron-down"></i>

            <div class="profile-dropdown" id="profileDropdown">
              <div class="dropdown-item">
                <i class="fas fa-user"></i>
                Account Settings
              </div>
              <div class="dropdown-item">
                <i class="fas fa-cog"></i>
                Shop Settings
              </div>
              <div class="dropdown-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                Logout
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="dashboard-container">
      <!-- Sidebar -->
      <nav class="sidebar">
        <ul class="sidebar-nav">
          <li class="nav-item">
            <a href="#" class="nav-link active" onclick="showPage('analytics')">
              <i class="fas fa-chart-line"></i>
              Home (Analytics)
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" onclick="showPage('products')">
              <i class="fas fa-solar-panel"></i>
              Solar Products
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" onclick="showPage('services')">
              <i class="fas fa-tools"></i>
              Solar Services
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" onclick="showPage('orders')">
              <i class="fas fa-shopping-cart"></i>
              Orders & Bookings
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" onclick="showPage('settings')">
              <i class="fas fa-cog"></i>
              Settings
            </a>
          </li>
        </ul>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Analytics Dashboard -->
        <div id="analytics-page" class="page">
          <div class="page-header">
            <div>
              <h2 class="page-title">Dashboard Analytics</h2>
              <p class="page-subtitle">
                Overview of your solar business performance
              </p>
            </div>
          </div>

          <!-- Stats Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon"><i class="fas fa-rupee-sign"></i></div>
              <div class="stat-value">₹2,45,000</div>
              <div class="stat-label">Total Revenue (This Month)</div>
            </div>

            <div class="stat-card success">
              <div class="stat-icon"><i class="fas fa-solar-panel"></i></div>
              <div class="stat-value">156</div>
              <div class="stat-label">Solar Products Sold</div>
            </div>

            <div class="stat-card warning">
              <div class="stat-icon"><i class="fas fa-tools"></i></div>
              <div class="stat-value">23</div>
              <div class="stat-label">Services Booked</div>
            </div>

            <div class="stat-card accent">
              <div class="stat-icon"><i class="fas fa-users"></i></div>
              <div class="stat-value">89</div>
              <div class="stat-label">Active Customers</div>
            </div>
          </div>

          <!-- Charts Row -->
          <div
            style="
              display: grid;
              grid-template-columns: 2fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            "
          >
            <!-- Revenue Chart -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Revenue Over Time</h3>
              </div>
              <div class="chart-container">
                <canvas id="revenueChart"></canvas>
              </div>
            </div>

            <!-- Energy Solutions Breakdown -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Energy Solutions Breakdown</h3>
              </div>
              <div class="chart-container">
                <canvas id="solutionsChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Installations Calendar -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Installation Schedule Heatmap</h3>
              <span class="card-action">View Calendar</span>
            </div>
            <p style="color: var(--text-light); margin-bottom: 20px">
              Darker squares indicate more installations scheduled
            </p>
            <div class="heatmap-container" id="installationHeatmap"></div>
          </div>

          <!-- Performance Table -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Product/Service Performance</h3>
              <span class="card-action">View All</span>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Views</th>
                    <th>Orders/Bookings</th>
                    <th>Conversion Rate</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>500W Monocrystalline Solar Panel</td>
                    <td>1,245</td>
                    <td>34</td>
                    <td>2.7%</td>
                  </tr>
                  <tr>
                    <td>5KW Solar Inverter</td>
                    <td>897</td>
                    <td>12</td>
                    <td>1.3%</td>
                  </tr>
                  <tr>
                    <td>Residential Installation Service</td>
                    <td>543</td>
                    <td>18</td>
                    <td>3.3%</td>
                  </tr>
                  <tr>
                    <td>Solar Battery 100Ah</td>
                    <td>432</td>
                    <td>8</td>
                    <td>1.9%</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Solar Products Page -->
        <div id="products-page" class="page hidden">
          <div class="page-header">
            <div>
              <h2 class="page-title">Solar Products Management</h2>
              <p class="page-subtitle">Manage your solar product inventory</p>
            </div>
            <button class="btn" onclick="showProductForm()">
              <i class="fas fa-plus"></i> Add New Product
            </button>
          </div>

          <!-- Filter Bar -->
          <div class="card">
            <div
              style="
                display: flex;
                gap: 15px;
                align-items: center;
                flex-wrap: wrap;
              "
            >
              <select
                style="
                  padding: 10px;
                  border: 2px solid var(--gray-light);
                  border-radius: 6px;
                "
              >
                <option>All Categories</option>
                <option>Solar Panels</option>
                <option>Inverters</option>
                <option>Batteries</option>
                <option>Complete Kits</option>
                <option>Accessories</option>
              </select>

              <select
                style="
                  padding: 10px;
                  border: 2px solid var(--gray-light);
                  border-radius: 6px;
                "
              >
                <option>All Status</option>
                <option>Live</option>
                <option>Draft</option>
                <option>Out of Stock</option>
              </select>

              <button class="btn btn-secondary">
                <i class="fas fa-filter"></i> Apply Filters
              </button>

              <button class="btn btn-secondary">
                <i class="fas fa-download"></i> Export
              </button>
            </div>
          </div>

          <!-- Products Table -->
          <div class="card">
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th><input type="checkbox" /></th>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><input type="checkbox" /></td>
                    <td>
                      <img
                        src="https://static.vecteezy.com/system/resources/previews/001/235/998/non_2x/solar-panel-cell-on-dramatic-sunset-sky-background-free-photo.jpg"
                        alt="Solar Panel"
                        class="product-img"
                      />
                    </td>
                    <td>500W Monocrystalline Solar Panel</td>
                    <td>Solar Panels</td>
                    <td>₹18,500</td>
                    <td>24</td>
                    <td><span class="status-badge status-live">Live</span></td>
                    <td>
                      <button class="action-btn" onclick="editProduct(1)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td><input type="checkbox" /></td>
                    <td>
                      <img
                        src="https://media.wired.com/photos/66f6d9e8edd5b22be7017791/1:1/w_2897,h_2897,c_limit/GettyImages-1681913304.jpg"
                        alt="Inverter"
                        class="product-img"
                      />
                    </td>
                    <td>5KW Solar Inverter</td>
                    <td>Inverters</td>
                    <td>₹42,000</td>
                    <td>8</td>
                    <td><span class="status-badge status-live">Live</span></td>
                    <td>
                      <button class="action-btn" onclick="editProduct(2)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td><input type="checkbox" /></td>
                    <td>
                      <img
                        src="https://media.assettype.com/outlookbusiness/2024-10-14/vgj060ya/house-with-large-solar-panel-roof1270664-27345.jpg"
                        alt="Solar Kit"
                        class="product-img"
                      />
                    </td>
                    <td>Residential Solar Kit 3KW</td>
                    <td>Complete Kits</td>
                    <td>₹1,85,000</td>
                    <td>5</td>
                    <td>
                      <span class="status-badge status-draft">Draft</span>
                    </td>
                    <td>
                      <button class="action-btn" onclick="editProduct(3)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td><input type="checkbox" /></td>
                    <td>
                      <img
                        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3yE5bvUxZFNgwF2EA6FB6nGzpohnSs2jKfQ&s"
                        alt="Battery"
                        class="product-img"
                      />
                    </td>
                    <td>Solar Battery 150Ah</td>
                    <td>Batteries</td>
                    <td>₹28,500</td>
                    <td>0</td>
                    <td>
                      <span class="status-badge status-out-of-stock"
                        >Out of Stock</span
                      >
                    </td>
                    <td>
                      <button class="action-btn" onclick="editProduct(4)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Product Form Page -->
        <div id="product-form-page" class="page hidden">
          <div class="page-header">
            <div>
              <a class="back-button" onclick="showPage('products')">
                <i class="fas fa-arrow-left"></i> Back to Products
              </a>
              <h2 class="page-title" id="product-form-title">
                Add Solar Product
              </h2>
              <p class="page-subtitle">Add a new product to your inventory</p>
            </div>
          </div>

          <div class="card">
            <div class="form-grid">
              <div class="form-group">
                <label>Product Name</label>
                <input
                  type="text"
                  placeholder="e.g., 500W Monocrystalline Solar Panel"
                  id="product-name"
                />
              </div>

              <div class="form-group">
                <label>Category</label>
                <select id="product-category">
                  <option value="">Select Category</option>
                  <option>Solar Panels</option>
                  <option>Inverters</option>
                  <option>Batteries</option>
                  <option>Complete Kits</option>
                  <option>Accessories</option>
                </select>
              </div>

              <div class="form-group">
                <label>Wattage (W)</label>
                <input
                  type="number"
                  placeholder="e.g., 500"
                  id="product-wattage"
                />
              </div>

              <div class="form-group">
                <label>Voltage (V)</label>
                <input
                  type="number"
                  placeholder="e.g., 24"
                  id="product-voltage"
                />
              </div>

              <div class="form-group">
                <label>Efficiency (%)</label>
                <input
                  type="number"
                  step="0.1"
                  placeholder="e.g., 21.5"
                  id="product-efficiency"
                />
              </div>

              <div class="form-group">
                <label>Warranty (Years)</label>
                <input
                  type="number"
                  placeholder="e.g., 25"
                  id="product-warranty"
                />
              </div>

              <div class="form-group">
                <label>Base Price (₹)</label>
                <input
                  type="number"
                  placeholder="e.g., 18500"
                  id="product-price"
                />
              </div>

              <div class="form-group">
                <label>Stock Quantity</label>
                <input
                  type="number"
                  placeholder="e.g., 50"
                  id="product-stock"
                />
              </div>
            </div>

            <div class="form-group">
              <label>Product Description</label>
              <textarea
                rows="4"
                placeholder="Describe the product in detail..."
                id="product-description"
              ></textarea>
            </div>

            <div class="form-group">
              <label>Product Images</label>
              <div
                class="file-upload"
                onclick="document.getElementById('product-images').click()"
              >
                <div class="file-upload-icon">
                  <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div>
                  <h4>Upload Product Images</h4>
                  <p>PNG, JPG up to 10MB each</p>
                </div>
                <input
                  type="file"
                  id="product-images"
                  multiple
                  accept="image/*"
                  style="display: none"
                  onchange="handleProductImageUpload(event)"
                />
              </div>
              <div id="product-image-preview" class="image-gallery"></div>
            </div>

            <div class="form-group">
              <label>SEO Title</label>
              <input
                type="text"
                placeholder="e.g., High-Efficiency 500W Solar Panel for Home Use"
                id="product-seo-title"
              />
            </div>

            <div class="form-group">
              <label>SEO Keywords</label>
              <input
                type="text"
                placeholder="solar panel, renewable energy, monocrystalline"
                id="product-seo-keywords"
              />
            </div>

            <div style="display: flex; gap: 15px; margin-top: 30px">
              <button class="btn btn-secondary" onclick="saveProduct('draft')">
                Save Draft
              </button>
              <button class="btn" onclick="saveProduct('publish')">
                Publish Product
              </button>
            </div>
          </div>
        </div>

        <!-- Solar Services Page -->
        <div id="services-page" class="page hidden">
          <div class="page-header">
            <div>
              <h2 class="page-title">Solar Services Management</h2>
              <p class="page-subtitle">
                Manage your solar installation and maintenance services
              </p>
            </div>
            <button class="btn" onclick="showServiceForm()">
              <i class="fas fa-plus"></i> Add New Service
            </button>
          </div>

          <!-- Services Table -->
          <div class="card">
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Title</th>
                    <th>Service Type</th>
                    <th>Duration</th>
                    <th>Price</th>
                    <th>Status</th>
                    <th>Bookings</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Residential Solar Installation</td>
                    <td>
                      <span class="status-badge status-live">Installation</span>
                    </td>
                    <td>2-3 days</td>
                    <td>₹15,000</td>
                    <td>
                      <span class="status-badge status-live">Active</span>
                    </td>
                    <td>
                      <button class="action-btn">
                        <i class="fas fa-calendar"></i> 12
                      </button>
                    </td>
                    <td>
                      <button class="action-btn" onclick="editService(1)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>Solar System Maintenance</td>
                    <td>
                      <span class="status-badge status-warning"
                        >Maintenance</span
                      >
                    </td>
                    <td>4-6 hours</td>
                    <td>₹3,500</td>
                    <td>
                      <span class="status-badge status-live">Active</span>
                    </td>
                    <td>
                      <button class="action-btn">
                        <i class="fas fa-calendar"></i> 8
                      </button>
                    </td>
                    <td>
                      <button class="action-btn" onclick="editService(2)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>Solar Energy Audit</td>
                    <td>
                      <span class="status-badge status-accent">Audit</span>
                    </td>
                    <td>1 day</td>
                    <td>₹8,000</td>
                    <td>
                      <span class="status-badge status-live">Active</span>
                    </td>
                    <td>
                      <button class="action-btn">
                        <i class="fas fa-calendar"></i> 3
                      </button>
                    </td>
                    <td>
                      <button class="action-btn" onclick="editService(3)">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="action-btn">
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Service Form Page -->
        <div id="service-form-page" class="page hidden">
          <div class="page-header">
            <div>
              <a class="back-button" onclick="showPage('services')">
                <i class="fas fa-arrow-left"></i> Back to Services
              </a>
              <h2 class="page-title" id="service-form-title">
                Add Solar Service
              </h2>
              <p class="page-subtitle">Add a new service to your offerings</p>
            </div>
          </div>

          <div class="card">
            <div class="form-grid">
              <div class="form-group">
                <label>Service Title</label>
                <input
                  type="text"
                  placeholder="e.g., Residential Solar Installation"
                  id="service-title"
                />
              </div>

              <div class="form-group">
                <label>Service Type</label>
                <select id="service-type">
                  <option value="">Select Service Type</option>
                  <option>Installation</option>
                  <option>Maintenance</option>
                  <option>Audit</option>
                  <option>Consultation</option>
                </select>
              </div>

              <div class="form-group">
                <label>Duration</label>
                <input
                  type="text"
                  placeholder="e.g., 2-3 days"
                  id="service-duration"
                />
              </div>

              <div class="form-group">
                <label>Service Price (₹)</label>
                <input
                  type="number"
                  placeholder="e.g., 15000"
                  id="service-price"
                />
              </div>
            </div>

            <div class="form-group">
              <label>Service Description</label>
              <textarea
                rows="4"
                placeholder="Describe the service in detail..."
                id="service-description"
              ></textarea>
            </div>

            <div class="form-group">
              <label>Cover Image</label>
              <div
                class="file-upload"
                onclick="document.getElementById('service-image').click()"
              >
                <div class="file-upload-icon">
                  <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div>
                  <h4>Upload Service Image</h4>
                  <p>PNG, JPG up to 5MB</p>
                </div>
                <input
                  type="file"
                  id="service-image"
                  accept="image/*"
                  style="display: none"
                  onchange="handleServiceImageUpload(event)"
                />
              </div>
              <div id="service-image-preview" class="image-gallery"></div>
            </div>

            <div style="display: flex; gap: 15px; margin-top: 30px">
              <button class="btn btn-secondary" onclick="saveService('draft')">
                Save Draft
              </button>
              <button class="btn" onclick="saveService('publish')">
                Publish Service
              </button>
            </div>
          </div>
        </div>

        <!-- Orders & Bookings Page -->
        <div id="orders-page" class="page hidden">
          <div class="page-header">
            <div>
              <h2 class="page-title">Orders & Bookings</h2>
              <p class="page-subtitle">
                Manage product orders and service bookings
              </p>
            </div>
          </div>

          <!-- Filter Tabs -->
          <div class="card">
            <div
              style="
                display: flex;
                gap: 20px;
                border-bottom: var(--border-light);
                padding-bottom: 15px;
                margin-bottom: 20px;
              "
            >
              <button class="btn btn-secondary" onclick="filterOrders('all')">
                All Orders
              </button>
              <button class="btn" onclick="filterOrders('products')">
                Products Only
              </button>
              <button class="btn" onclick="filterOrders('services')">
                Services Only
              </button>
            </div>

            <!-- Orders Table -->
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Item/Service</th>
                    <th>Type</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>#ORD-001</td>
                    <td>
                      <div>
                        <strong>Amit Sharma</strong><br />
                        <small>amit.sharma@gmail.com</small><br />
                        <small>+91 98765 43210</small>
                      </div>
                    </td>
                    <td>500W Solar Panel × 8</td>
                    <td>
                      <span class="status-badge status-live">Product</span>
                    </td>
                    <td>₹1,48,000</td>
                    <td>
                      <span class="status-badge status-pending">Pending</span>
                    </td>
                    <td>Dec 8, 2024</td>
                    <td>
                      <button
                        class="action-btn"
                        onclick="updateOrderStatus('ORD-001')"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        class="action-btn"
                        onclick="viewOrderDetails('ORD-001')"
                      >
                        <i class="fas fa-eye"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>#SRV-002</td>
                    <td>
                      <div>
                        <strong>Priya Patel</strong><br />
                        <small>priya.patel@gmail.com</small><br />
                        <small>+91 87654 32109</small>
                      </div>
                    </td>
                    <td>Residential Installation</td>
                    <td>
                      <span class="status-badge status-warning">Service</span>
                    </td>
                    <td>₹15,000</td>
                    <td>
                      <span class="status-badge status-live">Scheduled</span>
                    </td>
                    <td>Dec 7, 2024</td>
                    <td>
                      <button
                        class="action-btn"
                        onclick="updateOrderStatus('SRV-002')"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        class="action-btn"
                        onclick="viewOrderDetails('SRV-002')"
                      >
                        <i class="fas fa-eye"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>#ORD-003</td>
                    <td>
                      <div>
                        <strong>Karan Singh</strong><br />
                        <small>karan.singh@gmail.com</small><br />
                        <small>+91 76543 21098</small>
                      </div>
                    </td>
                    <td>5KW Solar Inverter</td>
                    <td>
                      <span class="status-badge status-live">Product</span>
                    </td>
                    <td>₹42,000</td>
                    <td>
                      <span class="status-badge status-completed">Shipped</span>
                    </td>
                    <td>Dec 5, 2024</td>
                    <td>
                      <button
                        class="action-btn"
                        onclick="updateOrderStatus('ORD-003')"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        class="action-btn"
                        onclick="viewOrderDetails('ORD-003')"
                      >
                        <i class="fas fa-eye"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Order Detail Page -->
        <div id="order-detail-page" class="page hidden">
          <div class="page-header">
            <div>
              <a class="back-button" onclick="showPage('orders')">
                <i class="fas fa-arrow-left"></i> Back to Orders
              </a>
              <h2 class="page-title">
                Order Details: <span id="order-id-display">#ORD-001</span>
              </h2>
              <p class="page-subtitle">View and manage order details</p>
            </div>
          </div>

          <div class="order-detail-card">
            <div class="order-detail-header">
              <h3>Order Information</h3>
              <select class="order-status-select" id="order-status">
                <option value="pending">Pending</option>
                <option value="processing">Processing</option>
                <option value="shipped">Shipped</option>
                <option value="completed">Completed</option>
                <option value="cancelled">Cancelled</option>
              </select>
            </div>

            <div class="order-info-grid">
              <div class="order-info-item">
                <div class="order-info-label">Order Date</div>
                <div class="order-info-value">Dec 8, 2024</div>
              </div>
              <div class="order-info-item">
                <div class="order-info-label">Customer Name</div>
                <div class="order-info-value">Amit Sharma</div>
              </div>
              <div class="order-info-item">
                <div class="order-info-label">Email</div>
                <div class="order-info-value">amit.sharma@gmail.com</div>
              </div>
              <div class="order-info-item">
                <div class="order-info-label">Phone</div>
                <div class="order-info-value">+91 98765 43210</div>
              </div>
              <div class="order-info-item">
                <div class="order-info-label">Total Amount</div>
                <div class="order-info-value">₹1,48,000</div>
              </div>
              <div class="order-info-item">
                <div class="order-info-label">Payment Method</div>
                <div class="order-info-value">Credit Card</div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Order Items</h3>
              </div>
              <div class="table-container">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Product/Service</th>
                      <th>Quantity</th>
                      <th>Unit Price</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>500W Monocrystalline Solar Panel</td>
                      <td>8</td>
                      <td>₹18,500</td>
                      <td>₹1,48,000</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Shipping Information</h3>
              </div>
              <div class="form-grid">
                <div class="form-group">
                  <label>Shipping Address</label>
                  <textarea rows="3" readonly>
123, Green Park Apartments
Solar Street, Chennai
Tamil Nadu - 600001</textarea
                  >
                </div>
                <div class="form-group">
                  <label>Tracking Number</label>
                  <input type="text" placeholder="Enter tracking number" />
                </div>
                <div class="form-group">
                  <label>Shipping Carrier</label>
                  <select>
                    <option>Select Carrier</option>
                    <option>DTDC</option>
                    <option>Blue Dart</option>
                    <option>Delhivery</option>
                    <option>Other</option>
                  </select>
                </div>
              </div>
            </div>

            <button class="btn" onclick="updateOrder()">Update Order</button>
          </div>
        </div>

        <!-- Settings Page -->
        <div id="settings-page" class="page hidden">
          <div class="page-header">
            <h2 class="page-title">Settings</h2>
            <p class="page-subtitle">
              Manage your shop profile and preferences
            </p>
          </div>

          <!-- Shop Profile Settings -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Shop Profile</h3>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label>Shop Logo</label>
                <div class="file-upload">
                  <div class="file-upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                  </div>
                  <div>
                    <h4>Upload Logo</h4>
                    <p>PNG, JPG up to 5MB</p>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>Shop Banner</label>
                <div class="file-upload">
                  <div class="file-upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                  </div>
                  <div>
                    <h4>Upload Banner</h4>
                    <p>PNG, JPG up to 10MB</p>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>Shop Name</label>
                <input type="text" value="Sunshine Solar Solutions" />
              </div>

              <div class="form-group">
                <label>Contact Person</label>
                <input type="text" value="Rajesh Kumar" />
              </div>

              <div class="form-group">
                <label>Email Address</label>
                <input type="email" value="rajesh@sunshinesolar.com" />
              </div>

              <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" value="+91 97918 05322" />
              </div>
            </div>

            <div class="form-group">
              <label>Shop Description</label>
              <textarea rows="4">
Leading provider of solar energy solutions in Tamil Nadu. We specialize in residential and commercial solar installations, maintenance services, and energy audits. Committed to sustainable energy and customer satisfaction.</textarea
              >
            </div>

            <div class="form-group">
              <label>Business Address</label>
              <textarea rows="3">
123 Solar Avenue, Green City, Tamil Nadu 632001</textarea
              >
            </div>

            <button class="btn">Save Profile</button>
          </div>

          <!-- Notification Preferences -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Notification Preferences</h3>
            </div>

            <div style="display: grid; gap: 20px">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div>
                  <strong>New Orders</strong>
                  <p style="color: var(--text-light); margin: 0">
                    Get notified when new orders are placed
                  </p>
                </div>
                <label class="switch">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div>
                  <strong>Service Bookings</strong>
                  <p style="color: var(--text-light); margin: 0">
                    Get notified about new service bookings
                  </p>
                </div>
                <label class="switch">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div>
                  <strong>Low Stock Alerts</strong>
                  <p style="color: var(--text-light); margin: 0">
                    Get alerted when product stock is low
                  </p>
                </div>
                <label class="switch">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div>
                  <strong>Email Notifications</strong>
                  <p style="color: var(--text-light); margin: 0">
                    Receive notifications via email
                  </p>
                </div>
                <label class="switch">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div>
                  <strong>SMS Notifications</strong>
                  <p style="color: var(--text-light); margin: 0">
                    Receive notifications via SMS
                  </p>
                </div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <button class="btn">Save Preferences</button>
          </div>

          <!-- Security Settings -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Security Settings</h3>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label>Current Password</label>
                <input type="password" placeholder="Enter current password" />
              </div>

              <div class="form-group">
                <label>New Password</label>
                <input type="password" placeholder="Enter new password" />
              </div>

              <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" placeholder="Confirm new password" />
              </div>
            </div>

            <div style="margin: 20px 0">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div>
                  <strong>Two-Factor Authentication</strong>
                  <p style="color: var(--text-light); margin: 0">
                    Add an extra layer of security to your account
                  </p>
                </div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <button class="btn">Update Security</button>
          </div>
        </div>
      </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
      // Global variables
      let currentPage = "analytics";
      let currentProductId = null;
      let currentServiceId = null;
      let currentOrderId = null;

      // Initialize dashboard
      document.addEventListener("DOMContentLoaded", function () {
        initializeCharts();
        generateInstallationHeatmap();
      });

      // Navigation functions
      function showPage(pageId) {
        // Hide all pages
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.add("hidden");
        });

        // Show selected page
        document.getElementById(pageId + "-page").classList.remove("hidden");

        // Update navigation
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.classList.remove("active");
        });

        // Find and activate the correct nav link
        const navLinks = document.querySelectorAll(".nav-link");
        for (let i = 0; i < navLinks.length; i++) {
          if (navLinks[i].getAttribute("onclick").includes(pageId)) {
            navLinks[i].classList.add("active");
            break;
          }
        }

        currentPage = pageId;
      }

      // Product form navigation
      function showProductForm(productId = null) {
        currentProductId = productId;

        // Set form title based on whether we're adding or editing
        const titleElement = document.getElementById("product-form-title");
        if (productId) {
          titleElement.textContent = "Edit Solar Product";
          // Here you would pre-populate the form with product data
          // For now, we'll just set some placeholder values
          document.getElementById("product-name").value =
            "500W Monocrystalline Solar Panel";
          document.getElementById("product-category").value = "Solar Panels";
          document.getElementById("product-wattage").value = 500;
          document.getElementById("product-voltage").value = 24;
          document.getElementById("product-efficiency").value = 21.5;
          document.getElementById("product-warranty").value = 25;
          document.getElementById("product-price").value = 18500;
          document.getElementById("product-stock").value = 24;
          document.getElementById("product-description").value =
            "High-efficiency monocrystalline solar panel ideal for residential use.";
          document.getElementById("product-seo-title").value =
            "High-Efficiency 500W Solar Panel for Home Use";
          document.getElementById("product-seo-keywords").value =
            "solar panel, renewable energy, monocrystalline";
        } else {
          titleElement.textContent = "Add Solar Product";
          // Clear form fields
          document.getElementById("product-name").value = "";
          document.getElementById("product-category").value = "";
          document.getElementById("product-wattage").value = "";
          document.getElementById("product-voltage").value = "";
          document.getElementById("product-efficiency").value = "";
          document.getElementById("product-warranty").value = "";
          document.getElementById("product-price").value = "";
          document.getElementById("product-stock").value = "";
          document.getElementById("product-description").value = "";
          document.getElementById("product-seo-title").value = "";
          document.getElementById("product-seo-keywords").value = "";
          document.getElementById("product-image-preview").innerHTML = "";
        }

        showPage("product-form");
      }

      // Service form navigation
      function showServiceForm(serviceId = null) {
        currentServiceId = serviceId;

        // Set form title based on whether we're adding or editing
        const titleElement = document.getElementById("service-form-title");
        if (serviceId) {
          titleElement.textContent = "Edit Solar Service";
          // Pre-populate the form with service data
          document.getElementById("service-title").value =
            "Residential Solar Installation";
          document.getElementById("service-type").value = "Installation";
          document.getElementById("service-duration").value = "2-3 days";
          document.getElementById("service-price").value = 15000;
          document.getElementById("service-description").value =
            "Complete installation of solar panels for residential properties including mounting, wiring, and connection to the grid.";
        } else {
          titleElement.textContent = "Add Solar Service";
          // Clear form fields
          document.getElementById("service-title").value = "";
          document.getElementById("service-type").value = "";
          document.getElementById("service-duration").value = "";
          document.getElementById("service-price").value = "";
          document.getElementById("service-description").value = "";
          document.getElementById("service-image-preview").innerHTML = "";
        }

        showPage("service-form");
      }

      // Order detail view
      function viewOrderDetails(orderId) {
        currentOrderId = orderId;
        document.getElementById("order-id-display").textContent = "#" + orderId;

        // Here you would fetch order details and populate the form
        // For now, we'll just show the page
        showPage("order-detail");
      }

      // Profile dropdown functions
      function toggleProfileDropdown() {
        const dropdown = document.getElementById("profileDropdown");
        dropdown.classList.toggle("active");
      }

      function logout() {
        if (confirm("Are you sure you want to logout?")) {
          // Redirect to login or landing page
          window.location.href = "login.html";
        }
      }

      // Product image upload handler
      function handleProductImageUpload(event) {
        const files = event.target.files;
        const previewContainer = document.getElementById(
          "product-image-preview"
        );
        previewContainer.innerHTML = "";

        if (files) {
          for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();

            reader.onload = function (e) {
              const galleryItem = document.createElement("div");
              galleryItem.className = "gallery-item";
              galleryItem.innerHTML = `
                <img src="${e.target.result}" alt="Product Image">
                <div class="gallery-overlay">
                  <i class="fas fa-times"></i>
                </div>
              `;
              previewContainer.appendChild(galleryItem);
            };

            reader.readAsDataURL(file);
          }
        }
      }

      // Service image upload handler
      function handleServiceImageUpload(event) {
        const file = event.target.files[0];
        const previewContainer = document.getElementById(
          "service-image-preview"
        );
        previewContainer.innerHTML = "";

        if (file) {
          const reader = new FileReader();

          reader.onload = function (e) {
            const galleryItem = document.createElement("div");
            galleryItem.className = "gallery-item";
            galleryItem.innerHTML = `
              <img src="${e.target.result}" alt="Service Image">
              <div class="gallery-overlay">
                <i class="fas fa-times"></i>
              </div>
            `;
            previewContainer.appendChild(galleryItem);
          };

          reader.readAsDataURL(file);
        }
      }

      // Save product function
      function saveProduct(status) {
        // Here you would collect form data and send it to the server
        const productData = {
          name: document.getElementById("product-name").value,
          category: document.getElementById("product-category").value,
          wattage: document.getElementById("product-wattage").value,
          voltage: document.getElementById("product-voltage").value,
          efficiency: document.getElementById("product-efficiency").value,
          warranty: document.getElementById("product-warranty").value,
          price: document.getElementById("product-price").value,
          stock: document.getElementById("product-stock").value,
          description: document.getElementById("product-description").value,
          seoTitle: document.getElementById("product-seo-title").value,
          seoKeywords: document.getElementById("product-seo-keywords").value,
          status: status,
        };

        console.log("Saving product:", productData);

        // After saving, redirect back to products list
        alert(
          `Product ${currentProductId ? "updated" : "created"} successfully!`
        );
        showPage("products");
      }

      // Save service function
      function saveService(status) {
        // Here you would collect form data and send it to the server
        const serviceData = {
          title: document.getElementById("service-title").value,
          type: document.getElementById("service-type").value,
          duration: document.getElementById("service-duration").value,
          price: document.getElementById("service-price").value,
          description: document.getElementById("service-description").value,
          status: status,
        };

        console.log("Saving service:", serviceData);

        // After saving, redirect back to services list
        alert(
          `Service ${currentServiceId ? "updated" : "created"} successfully!`
        );
        showPage("services");
      }

      // Update order function
      function updateOrder() {
        const status = document.getElementById("order-status").value;
        console.log("Updating order", currentOrderId, "to status:", status);

        // Here you would send the update to the server
        alert("Order updated successfully!");
        showPage("orders");
      }

      // Chart initialization
      function initializeCharts() {
        // Revenue Chart
        const revenueCtx = document
          .getElementById("revenueChart")
          .getContext("2d");
        new Chart(revenueCtx, {
          type: "line",
          data: {
            labels: [
              "Jan",
              "Feb",
              "Mar",
              "Apr",
              "May",
              "Jun",
              "Jul",
              "Aug",
              "Sep",
              "Oct",
              "Nov",
              "Dec",
            ],
            datasets: [
              {
                label: "Revenue (₹)",
                data: [
                  180000, 195000, 220000, 210000, 245000, 230000, 260000,
                  275000, 240000, 245000, 260000, 280000,
                ],
                borderColor: "#38b6ff",
                backgroundColor: "rgba(56, 182, 255, 0.1)",
                tension: 0.4,
                fill: true,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    return "₹" + value.toLocaleString();
                  },
                },
              },
            },
          },
        });

        // Solutions Pie Chart
        const solutionsCtx = document
          .getElementById("solutionsChart")
          .getContext("2d");
        new Chart(solutionsCtx, {
          type: "doughnut",
          data: {
            labels: [
              "Solar Panels",
              "Inverters",
              "Batteries",
              "Services",
              "Accessories",
            ],
            datasets: [
              {
                data: [45, 25, 15, 10, 5],
                backgroundColor: [
                  "#38b6ff",
                  "#48bb78",
                  "#ed8936",
                  "#ff7e30",
                  "#718096",
                ],
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
              },
            },
          },
        });
      }

      // Generate installation heatmap
      function generateInstallationHeatmap() {
        const heatmapContainer = document.getElementById("installationHeatmap");
        const days = 91; // 3 months

        for (let i = 0; i < days; i++) {
          const day = document.createElement("div");
          day.className = "heatmap-day";

          // Random activity level (0-4)
          const level = Math.floor(Math.random() * 5);
          if (level > 0) {
            day.classList.add("level-" + level);
          }

          heatmapContainer.appendChild(day);
        }
      }

      // Product management functions
      function editProduct(productId) {
        showProductForm(productId);
      }

      // Service management functions
      function editService(serviceId) {
        showServiceForm(serviceId);
      }

      // Order management functions
      function updateOrderStatus(orderId) {
        const newStatus = prompt(
          "Enter new status (Pending/Processing/Shipped/Completed):"
        );
        if (newStatus) {
          console.log("Updating order", orderId, "to status:", newStatus);
          // Update status in the table
          alert("Order status updated successfully!");
        }
      }

      function filterOrders(type) {
        console.log("Filtering orders by type:", type);
        // Filter table rows based on type
        const rows = document.querySelectorAll(
          "#orders-page .data-table tbody tr"
        );
        rows.forEach((row) => {
          if (type === "all") {
            row.style.display = "";
          } else {
            const typeCell = row.querySelector("td:nth-child(4)");
            if (typeCell.textContent.toLowerCase().includes(type)) {
              row.style.display = "";
            } else {
              row.style.display = "none";
            }
          }
        });
      }

      // Close dropdowns when clicking outside
      document.addEventListener("click", function (event) {
        if (!event.target.closest(".profile-menu")) {
          document.getElementById("profileDropdown").classList.remove("active");
        }
      });
    </script>
  </body>
</html>
